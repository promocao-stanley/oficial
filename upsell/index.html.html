<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upsell de Entrega - Stanley</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <script defer>
        // Gerenciar cookies
        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
        }

        function setCookie(name, value, days) {
            const date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            document.cookie = `${name}=${value}; expires=${date.toUTCString()}; path=/`;
        }

        // Simula√ß√£o de fila de pedidos com persist√™ncia
        let queueNumber = getCookie('queueNumber');
        if (!queueNumber) {
            queueNumber = Math.floor(30000 + Math.random() * 5000); // N√∫mero inicial aleat√≥rio
            setCookie('queueNumber', queueNumber, 7); // Gravar no cookie por 7 dias
        }

        function updateQueue() {
    const queueDisplay = document.getElementById("queue-number");
    const daysEstimate = document.getElementById("days-estimate");

    if (queueNumber > 1) {
        queueNumber--;
        setCookie('queueNumber', queueNumber, 7); // Atualizar cookie
        queueDisplay.textContent = queueNumber;

        // Gradiente din√¢mico da cor no n√∫mero
        const progressPercent = (30000 - queueNumber) / 30000 * 100;
        if (progressPercent < 50) {
            // Vermelho para laranja
            queueDisplay.style.color = `rgb(255, ${Math.floor(progressPercent * 5.1)}, 0)`;
        } else {
            // Laranja para verde
            queueDisplay.style.color = `rgb(${Math.floor(255 - (progressPercent - 50) * 5.1)}, 165, 0)`;
        }

        // Efeito de pulsa√ß√£o no n√∫mero
        queueDisplay.classList.add('pulse');
        setTimeout(() => {
            queueDisplay.classList.remove('pulse');
        }, 300);

        // Calcular estimativa de dias
        const estimatedDays = Math.ceil(queueNumber / 1000); // Supondo 1000 entregas por dia
        daysEstimate.textContent = `Estimativa: entrega em at√© ${estimatedDays} dias √∫teis.`;

        // Mostrar notifica√ß√£o
        showNotification();
    }
}

        // Mostrar popup de notifica√ß√£o
        function showNotification() {
            const notification = document.createElement('div');
            notification.className = 'notification-popup';
            notification.innerHTML = `
                <p>üì¶ Mais um pedido sendo embalado para envio!</p>
            `;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.remove();
            }, 3000); // Remover popup ap√≥s 3 segundos
        }

        document.addEventListener("DOMContentLoaded", () => {
            const queueDisplay = document.getElementById("queue-number");
            queueDisplay.textContent = queueNumber;

            // Atualizar barra e fila em intervalos
            setInterval(updateQueue, 10000); // Atualiza a cada 10 segundos
        });
    </script>
</head>
<body>
    <!-- Pop-up de Alerta -->
    <div id="popup-overlay" class="popup-overlay">
        <div class="popup">
            <h2>‚ö† ATEN√á√ÉO ‚ö†</h2>
            <p>
                Sua compra foi processada, por√©m estamos enfrentando congestionamento nas entregas.
                O prazo de entrega pode ser de at√© <strong>30 dias √∫teis</strong>.
            </p>
            <button onclick="document.getElementById('popup-overlay').style.display='none';document.getElementById('main-content').style.display='block';">Entendi</button>
        </div>
    </div>

    <!-- Conte√∫do Principal -->
    <div id="main-content" style="display: none;">
        <header class="header">
            <img src="../img/logo.png" alt="Stanley Logo" class="logo">
        </header>

        <section id="upsell" class="upsell">
            <h1>üì¶ Agilize a Entrega do Seu Pedido!</h1>
            <p>Devido ao grande sucesso do lan√ßamento, estamos enfrentando alta demanda.</p>
            <p>Por apenas <strong>R$ 28,70</strong>, incluiremos seu pedido em uma transportadora especial, e voc√™ receber√° o produto em at√© <strong>7 dias √∫teis</strong>.</p>
            <p><em>Se optar por n√£o acelerar, seu pedido j√° foi confirmado e voc√™ ser√° notificado por e-mail quando for enviado.</em></p>

            <!-- Fila de Pedidos -->
            <div class="queue-info">
                <h2>Sua compra √© n√∫mero: <span id="queue-number"></span></h2>
                <div class="progress-bar-container">
                    <div id="progress-bar" class="progress-bar"></div>
                </div>
                <p id="days-estimate"></p>
            </div>

            <!-- Legenda das cores -->
            <div class="legend">
                <div class="legend-item">
                    <span class="legend-color" style="background-color: red;"></span> Produto em congestionamento
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background-color: orange;"></span> Produto perto de ser embalado
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background-color: green;"></span> Produto enviado
                </div>
            </div>

            <!-- Bot√£o de A√ß√£o -->
            <button class="proceed-btn" onclick="window.location.href='https://google.com.br';">
                <span>üöö PROSSEGUIR</span>
            </button>
        </section>

        <footer class="footer">
            <p>¬© 2025 Stanley Brasil. Todos os direitos reservados.</p>
        </footer>
    </div>
</body>
</html>
